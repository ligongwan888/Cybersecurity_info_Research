<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åæ³°ç½‘ç»œå®‰å…¨å®¢æˆ·ä¿¡æ¯æŸ¥è¯¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f9; }
        .container { max-width: 800px; margin: auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        input[type="text"] { width: 70%; padding: 10px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #results { margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }
        .info-item { margin-bottom: 10px; padding: 10px; border-bottom: 1px dotted #ccc; }
        .label { font-weight: bold; color: #555; display: inline-block; width: 120px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>åæ³°ç½‘ç»œå®‰å…¨å®¢æˆ·ä¿¡æ¯æŸ¥è¯¢ ğŸ”</h1>
        <div>
            <input type="text" id="companyInput" placeholder="è¯·è¾“å…¥å…¬å¸åå­—ï¼Œä¾‹å¦‚ Google æˆ– Apple">
            <button onclick="searchCompany()">æœç´¢</button>
        </div>
        <div id="loading" style="display: none; color: #007bff; margin-top: 10px;">æ­£åœ¨åŠªåŠ›æœç´¢ä¸­...</div>
        <div id="results">
            </div>
    </div>

    <script>
        // *** å·²ç»æ›¿æ¢ä¸ºæ‚¨çš„ Render åç«¯ URL ***
        const API_BASE_URL = "https://cybersecurity-info-research.onrender.com"; 
        
        async function searchCompany() {
            const companyName = document.getElementById('companyInput').value.trim();
            const resultsDiv = document.getElementById('results');
            const loadingDiv = document.getElementById('loading');
            
            resultsDiv.innerHTML = '';
            
            if (!companyName) {
                resultsDiv.innerHTML = '<p style="color: red;">è¯·è¾“å…¥å…¬å¸åç§°ï¼</p>';
                return;
            }

            loadingDiv.style.display = 'block';

            try {
                // æ„é€  API è¯·æ±‚ URL
                const apiUrl = `${API_BASE_URL}/api/search?name=${encodeURIComponent(companyName)}`;
                
                // å‘èµ· API è¯·æ±‚
                const response = await fetch(apiUrl);
                
                // æ£€æŸ¥ HTTP çŠ¶æ€ç 
                if (!response.ok) {
                    throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€ç : ${response.status}`);
                }
                
                // è§£æ JSON æ•°æ® (æ³¨æ„ï¼šJavaScript ä¼šè‡ªåŠ¨å¤„ç† JSON ä¸­çš„ Unicode ç¼–ç )
                const data = await response.json();
                
                // æ£€æŸ¥æ˜¯å¦æœ‰åç«¯è¿”å›çš„é”™è¯¯ä¿¡æ¯
                if (data.error) {
                    resultsDiv.innerHTML = `<p style="color: red;">æœç´¢å¤±è´¥: ${data.error}</p>`;
                } else {
                    // æ¸²æŸ“ç»“æœ
                    displayResults(data);
                }
                
            } catch (error) {
                console.error('æœç´¢æ—¶å‘ç”Ÿé”™è¯¯:', error);
                resultsDiv.innerHTML = `<p style="color: red;">è¿æ¥é”™è¯¯æˆ–æ•°æ®å¤„ç†å¤±è´¥: ${error.message}</p>`;
            } finally {
                loadingDiv.style.display = 'none';
            }
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            
            // æ¸²æŸ“ç»“æœæ—¶ï¼ŒJavaScript ä¼šè‡ªåŠ¨å°† Unicode è½¬æ¢ä¸ºä¸­æ–‡å­—ç¬¦
            resultsDiv.innerHTML = `
                <div class="info-item"><span class="label">å…¬å¸åç§°:</span> ${data.company_name}</div>
                <div class="info-item"><span class="label">å®˜æ–¹ç½‘ç«™:</span> <a href="${data.website}" target="_blank">${data.website}</a></div>
                <div class="info-item"><span class="label">å¹´åº¦è¥æ”¶:</span> ${data.revenue}</div>
                <div class="info-item"><span class="label">ä¸šåŠ¡èŒƒå›´:</span> ${data.business}</div>
                <div class="info-item"><span class="label">å®‰å…¨äº‹ä»¶:</span> ${data.security_incident}</div>
            `;
        }
    </script>
</body>
</html>
